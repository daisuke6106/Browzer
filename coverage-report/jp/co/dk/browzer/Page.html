<!DOCTYPE html>
<html>
<head>
  <title>Page.java</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../../../../coverage.css'/>
  <link rel='shortcut icon' type='image/png' href='../../../../logo.png'/>
  <script type='text/javascript' src='../../../../coverage.js'></script>
  <script type='text/javascript' src='../../../../prettify.js'></script>
</head>
<body onload='prettyPrint()'>
  <table cellpadding='0' cellspacing='1'>
    <caption>Browzer/src/main/java/jp/co/dk/browzer/Page.java</caption>
    <tr>
      <td class='line'>1</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>package jp.co.dk.browzer;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td><pre class='imports prettyprint' onclick='showHideLines(this)'><div>import java.io.BufferedWriter;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import jp.co.dk.browzer.contents.BrowzingExtension;
import jp.co.dk.browzer.exception.PageAccessException;
import jp.co.dk.browzer.exception.PageHeaderImproperException;
import jp.co.dk.browzer.exception.PageIllegalArgumentException;
import jp.co.dk.browzer.exception.PageSaveException;
import jp.co.dk.browzer.http.header.ContentsType;
import jp.co.dk.browzer.http.header.RequestHeader;
import jp.co.dk.browzer.http.header.ResponseHeader;
import jp.co.dk.browzer.http.header.HeaderField;
import jp.co.dk.browzer.property.BrowzerProperty;
import jp.co.dk.document.ByteDump;
import jp.co.dk.document.Element;
import jp.co.dk.document.exception.DocumentException;
import jp.co.dk.document.html.HtmlDocument;
import jp.co.dk.document.html.constant.HtmlElementName;
import jp.co.dk.document.html.constant.HtmlRequestMethodName;
import jp.co.dk.document.html.element.A;
import jp.co.dk.document.html.element.Form;
import jp.co.dk.document.html.exception.HtmlDocumentException;
import jp.co.dk.logger.Logger;
import jp.co.dk.logger.LoggerFactory;
import jp.co.dk.property.Property;
import static jp.co.dk.browzer.message.BrowzingMessage.*;
</div><span>import ...</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>/**
 * Pageは、指定URLのページを表すオブジェクトです。&lt;p/>
 * 
 * 本クラスはGoogle Chromeや、FireFox等のインターネットブラウザのページタブと同等であり、
 * 指定されたURLを元にそのページへ接続を行い、そのページ内の情報取得や、画面遷移、ダウンロード等の処理を行うためのクラスです。&lt;br/>
 * &lt;br/>
 * 接続先のURLがHTMLを表す場合、そのページ内のアンカーやFormを元に新たなページへの遷移、本ページの様々な情報の取得、ページのダウンロード等を行うことができます。&lt;br/>
 * URLの接続先は、HTMLに限らずXML、画像やzipや通常のテキストファイル等への接続も行うことができます。
 * 
 * @version 1.0
 * @author D.Kanno
 */</div><span>/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>53</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>public class Page {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>55</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** URLオブジェクト */</pre></td>
    </tr>
    <tr>
      <td class='line'>56</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected Url url;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>58</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** リクエストヘッダ */</pre></td>
    </tr>
    <tr>
      <td class='line'>59</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected RequestHeader requestHeader;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>61</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** レスポンスヘッダ */</pre></td>
    </tr>
    <tr>
      <td class='line'>62</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected ResponseHeader responseHeader;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>64</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** リードデータフラグ */</pre></td>
    </tr>
    <tr>
      <td class='line'>65</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected boolean readDataFlg;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>67</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** ページデータ */</pre></td>
    </tr>
    <tr>
      <td class='line'>68</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected ByteDump byteDump;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>70</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** ページのドキュメントオブジェクト */</pre></td>
    </tr>
    <tr>
      <td class='line'>71</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected jp.co.dk.document.File document;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>73</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** URLコネクション */</pre></td>
    </tr>
    <tr>
      <td class='line'>74</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected URLConnection connection;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>76</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** ページイベントハンドラ */</pre></td>
    </tr>
    <tr>
      <td class='line'>77</td><td class='count'>9</td>
      <td><pre class='prettyprint covered' id='l77s0'>	protected List&lt;PageEventHandler> eventHandler = new ArrayList&lt;PageEventHandler>();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>79</td><td>&nbsp;</td>
      <td><pre class='comment'>	/** ロガーインスタンス */</pre></td>
    </tr>
    <tr>
      <td class='line'>80</td><td class='count'>9</td>
      <td><pre class='prettyprint covered' id='l80s0'>	protected Logger logger = LoggerFactory.getLogger(this.getClass());</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * 指定のURL文字列からページのインスタンスを生成する。&lt;br/>
	 * ページの情報はインスタンス生成時に読み込みます。&lt;br/>
	 * 
	 * @param url URLを表す文字列
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>91</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Page(String url) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>92</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l92s0'>		this(url, new HashMap&lt;String,String>(), true, new ArrayList&lt;PageEventHandler>());</pre></td>
    </tr>
    <tr>
      <td class='line'>93</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l93s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p/>
	 * 指定のURL文字 列と、リクエストヘッダ、データ読み込みフラグを元にページのインスタンスを生成する。&lt;br/>
	 * ページの情報はインスタンス生成時に読み込みます。&lt;br/>
	 * 
	 * @param url URLを表す文字列
	 * @param requestHeader リクエストヘッダ
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>105</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Page(String url, Map&lt;String, String> requestHeader) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>106</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l106s0'>		this(url, requestHeader, true, new ArrayList&lt;PageEventHandler>());</pre></td>
    </tr>
    <tr>
      <td class='line'>107</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l107s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p/>
	 * 指定のURL文字 列と、リクエストヘッダ、データ読み込みフラグを元にページのインスタンスを生成する。&lt;br/>
	 * ページの情報はインスタンス生成時に読み込みます。&lt;br/>
	 * 
	 * @param url URLを表す文字列
	 * @param requestHeader リクエストヘッダ
	 * @param readDataFlg データ読み込みフラグ
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>120</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Page(String url, Map&lt;String, String> requestHeader, boolean readDataFlg) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>121</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l121s0'>		this(url, requestHeader, readDataFlg, new ArrayList&lt;PageEventHandler>());</pre></td>
    </tr>
    <tr>
      <td class='line'>122</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l122s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p/>
	 * 指定のURL文字列と、リクエストヘッダ、データ読み込みフラグを元にページのインスタンスを生成する。&lt;br/>
	 * &lt;br/>
	 * データ読み込みフラグにtrueが設定されていた場合、このインスタンスが生成された際にページ情報を取得しメモリ上に保持します。&lt;br/>
	 * falseの場合、getDataメソッドが呼ばれるまでページ情報の取得は行いません。&lt;br/>
	 * 
	 * @param url URLを表す文字列
	 * @param requestHeader リクエストヘッダ
	 * @param readDataFlg データ読み込みフラグ
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>137</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l137s0'>	public Page(String url, Map&lt;String, String> requestHeader, boolean readDataFlg, List&lt;PageEventHandler> pageEventHandlerList) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>138</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l138s0'>		this.logger.constractor(this.getClass(), url, requestHeader, new Boolean(readDataFlg), pageEventHandlerList);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>140</td><td class='count'>5</td>
      <td><pre class='prettyprint jmp'>		<span id='l140s0' title='Executions: 5' class='covered'>if (url == null</span> || <span id='l140s1' title='Executions: 4' class='covered'>url.equals(""))</span> <span id='l140s2' title='Executions: 1' class='covered'>throw new PageIllegalArgumentException(ERROR_URL_IS_NOT_SET);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>141</td><td class='count'>4</td>
      <td><pre class='prettyprint jmp'>		<span id='l141s0' title='Executions: 4' class='covered'>if (requestHeader == null)</span> <span id='l141s1' title='Executions: 0' class='uncovered'>requestHeader = new HashMap&lt;String, String>();</span></pre></td>
    </tr>
    <tr>
      <td class='line'>142</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l142s0'>		this.url                 = this.createUrl(url);</pre></td>
    </tr>
    <tr>
      <td class='line'>143</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l143s0'>		this.readDataFlg         = readDataFlg;</pre></td>
    </tr>
    <tr>
      <td class='line'>144</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l144s0'>		this.eventHandler        = pageEventHandlerList;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>146</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l146s0'>		URLConnection connection = this.createURLConnection(this.url.getUrlObject(), HtmlRequestMethodName.GET);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>148</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l148s0'>		Map&lt;String, String> requestHeaderByProperty = this.getRequestHeaderByPorperty();</pre></td>
    </tr>
    <tr>
      <td class='line'>149</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l149s0'>		requestHeaderByProperty.putAll(requestHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>150</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>151</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l151s0'>			this.requestHeader = this.createRequestHeader(requestHeaderByProperty);</pre></td>
    </tr>
    <tr>
      <td class='line'>152</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l152s0'>			this.logger.info("request_header=[" + this.requestHeader + "]");</pre></td>
    </tr>
    <tr>
      <td class='line'>153</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l153s0'>		} catch (PageHeaderImproperException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>154</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l154s0'>			throw new PageIllegalArgumentException(ERROR_REQUEST_HEADER_IS_INVALID, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>155</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>156</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l156s0'>		this.setRequestProperty(connection, requestHeaderByProperty);</pre></td>
    </tr>
    <tr>
      <td class='line'>157</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>158</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l158s0'>			this.logger.info("connection start url=[" + this.url + "]");</pre></td>
    </tr>
    <tr>
      <td class='line'>159</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l159s0'>			connection.connect();</pre></td>
    </tr>
    <tr>
      <td class='line'>160</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l160s0'>			this.logger.info("connection fin");</pre></td>
    </tr>
    <tr>
      <td class='line'>161</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l161s0'>			this.connection = connection;</pre></td>
    </tr>
    <tr>
      <td class='line'>162</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l162s0'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>163</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l163s0'>			throw new PageAccessException( ERROR_INPUT_OUTPUT_EXCEPTION_OCCURRED_WHEN_CONNECTING_TO_A_URL, this.url.toString(), e );</pre></td>
    </tr>
    <tr>
      <td class='line'>164</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>165</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l165s0'>		Map&lt;String, List&lt;String>> responseHeader = connection.getHeaderFields();</pre></td>
    </tr>
    <tr>
      <td class='line'>166</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>167</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l167s0'>			this.responseHeader = this.createResponseHeader(responseHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>168</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l168s0'>			this.logger.info("response_header=[" + this.responseHeader + "]");</pre></td>
    </tr>
    <tr>
      <td class='line'>169</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l169s0'>		} catch (PageHeaderImproperException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>170</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l170s0'>			throw new PageIllegalArgumentException(ERROR_RESPONSE_HEADER_IS_INVALID, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>171</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>172</td><td class='count'>3</td>
      <td><pre class='prettyprint jmp'>		<span id='l172s0' title='Executions: 3' class='covered'>if (readDataFlg)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>173</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l173s0'>			this.logger.info("download start");</pre></td>
    </tr>
    <tr>
      <td class='line'>174</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l174s0'>			this.byteDump = this.getByteDump(connection);</pre></td>
    </tr>
    <tr>
      <td class='line'>175</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l175s0'>			this.logger.info("download fin size=[" + this.byteDump.length() + " Byte]");</pre></td>
    </tr>
    <tr>
      <td class='line'>176</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>177</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l177s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * 指定のFORM要素からページのインスタンスを生成します。&lt;br/>
	 * ページの情報はインスタンス生成時に読み込みます。&lt;br/>
	 * 
	 * @param form FORM要素
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>188</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected Page(Form form) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>189</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l189s0'>		this(form, new HashMap&lt;String, String>(), true, new ArrayList&lt;PageEventHandler>());</pre></td>
    </tr>
    <tr>
      <td class='line'>190</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l190s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * 指定のFORM要素からページのインスタンスを生成します。&lt;br/>
	 * ページの情報はインスタンス生成時に読み込みます。&lt;br/>
	 * 
	 * @param form FORM要素
	 * @param requestProperty リクエストヘッダマップ
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>202</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected Page(Form form, Map&lt;String, String> requestProperty) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>203</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l203s0'>		this(form, requestProperty, true, new ArrayList&lt;PageEventHandler>());</pre></td>
    </tr>
    <tr>
      <td class='line'>204</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l204s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * 指定のFORM要素からページのインスタンスを生成します。&lt;br/>
	 * ページの情報はインスタンス生成時に読み込みます。&lt;br/>
	 * 
	 * @param form FORM要素
	 * @param requestProperty リクエストヘッダマップ
	 * @param readDataFlg データ読み込みフラグ
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>217</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected Page(Form form, Map&lt;String, String> requestProperty, boolean readDataFlg) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>218</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l218s0'>		this(form, requestProperty, readDataFlg, new ArrayList&lt;PageEventHandler>());</pre></td>
    </tr>
    <tr>
      <td class='line'>219</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l219s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * 指定のFORM要素からページのインスタンスを生成します。&lt;br/>
	 * &lt;br/>
	 * データ読み込みフラグにtrueが設定されていた場合、このインスタンスが生成された際にページ情報を取得しメモリ上に保持します。&lt;br/>
	 * falseの場合、getDataメソッドが呼ばれるまでページ情報の取得は行いません。
	 * 
	 * @param form FORM要素
	 * @param requestProperty リクエストヘッダマップ
	 * @param readDataFlg データ読み込みフラグ
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>234</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l234s0'>	protected Page(Form form, Map&lt;String, String> requestProperty, boolean readDataFlg, List&lt;PageEventHandler> pageEventHandlerList) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>235</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l235s0'>		this.logger.constractor(this.getClass(), form, requestProperty, new Boolean(readDataFlg), pageEventHandlerList);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>237</td><td class='count'>3</td>
      <td><pre class='prettyprint jmp'>		<span id='l237s0' title='Executions: 3' class='covered'>if (form == null)</span> <span id='l237s1' title='Executions: 1' class='covered'>throw new PageIllegalArgumentException(ERROR_FORM_IS_NOT_SPECIFIED);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>238</td><td class='count'>2</td>
      <td><pre class='prettyprint jmp'>		<span id='l238s0' title='Executions: 2' class='covered'>if (requestProperty == null)</span> <span id='l238s1' title='Executions: 1' class='covered'>requestProperty = new HashMap&lt;String, String>();</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>240</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>241</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l241s0'>			this.url = this.createUrl(form.getAction().getURL().toString());</pre></td>
    </tr>
    <tr>
      <td class='line'>242</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l242s0'>		} catch (HtmlDocumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>243</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l243s0'>			throw new PageIllegalArgumentException(ERROR_AN_INVALID_URL_WAS_SPECIFIED, e.getEmbeddedStrList(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>244</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>245</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l245s0'>		this.readDataFlg    = readDataFlg;</pre></td>
    </tr>
    <tr>
      <td class='line'>246</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l246s0'>		this.eventHandler   = pageEventHandlerList;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>248</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>249</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l249s0'>			this.requestHeader = this.createRequestHeader(requestProperty);</pre></td>
    </tr>
    <tr>
      <td class='line'>250</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l250s0'>			this.logger.info("request_header=[" + this.requestHeader + "]");</pre></td>
    </tr>
    <tr>
      <td class='line'>251</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l251s0'>		} catch (PageHeaderImproperException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>252</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l252s0'>			throw new PageIllegalArgumentException(ERROR_REQUEST_HEADER_IS_INVALID, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>253</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>254</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l254s0'>		URLConnection connection = this.createURLConnection(this.url.getUrlObject(), form.getMethod());</pre></td>
    </tr>
    <tr>
      <td class='line'>255</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l255s0'>		this.connection = this.setRequestProperty(connection, requestProperty);</pre></td>
    </tr>
    <tr>
      <td class='line'>256</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>257</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l257s0'>			this.logger.info("connection start url=[" + this.url + "]");</pre></td>
    </tr>
    <tr>
      <td class='line'>258</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l258s0'>			BufferedWriter outputStream = new BufferedWriter(new OutputStreamWriter(this.connection.getOutputStream()));</pre></td>
    </tr>
    <tr>
      <td class='line'>259</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l259s0'>			outputStream.write(form.createMessage());</pre></td>
    </tr>
    <tr>
      <td class='line'>260</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l260s0'>			outputStream.close();</pre></td>
    </tr>
    <tr>
      <td class='line'>261</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l261s0'>			this.logger.info("connection fin");</pre></td>
    </tr>
    <tr>
      <td class='line'>262</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l262s0'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>263</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l263s0'>			throw new PageAccessException(ERROR_FAILED_TO_SEND_MESSAGE, new String[]{this.url.getURL(), form.getMethod().toString()}, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>264</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>265</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l265s0'>		Map&lt;String, List&lt;String>> responseHeader = connection.getHeaderFields();</pre></td>
    </tr>
    <tr>
      <td class='line'>266</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>267</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l267s0'>			this.responseHeader = this.createResponseHeader(responseHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>268</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l268s0'>			this.logger.info("response_header=[" + this.responseHeader + "]");</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>270</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l270s0'>		} catch (PageHeaderImproperException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>271</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l271s0'>			throw new PageIllegalArgumentException(ERROR_RESPONSE_HEADER_IS_INVALID, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>272</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>273</td><td class='count'>1</td>
      <td><pre class='prettyprint jmp'>		<span id='l273s0' title='Executions: 1' class='covered'>if (readDataFlg)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>274</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l274s0'>			this.logger.info("download start");</pre></td>
    </tr>
    <tr>
      <td class='line'>275</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l275s0'>			this.byteDump = this.getByteDump(connection);</pre></td>
    </tr>
    <tr>
      <td class='line'>276</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l276s0'>			this.logger.info("download fin size=[" + this.byteDump.length() + " Byte]");</pre></td>
    </tr>
    <tr>
      <td class='line'>277</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>278</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l278s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * 指定のURL文字列、通信した際のヘッダ、ページデータといった過去に通信した際に取得したデータからページのインスタンスを生成する。
	 * 
	 * @param url            URLを表す文字列
	 * @param requestHeader  リクエストヘッダ
	 * @param responseHeader レスポンスヘッダ
	 * @param data           ページデータ
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageHeaderImproperException  リクエストヘッダ、またはレスポンスヘッダが不正であった場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>291</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l291s0'>	protected Page(String url, Map&lt;String,String> requestHeader, Map&lt;String, List&lt;String>> responseHeader, ByteDump data, List&lt;PageEventHandler> pageEventHandlerList) throws PageIllegalArgumentException, PageHeaderImproperException {</pre></td>
    </tr>
    <tr>
      <td class='line'>292</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l292s0'>		this.logger.constractor(this.getClass(), url, requestHeader, responseHeader, data, pageEventHandlerList);</pre></td>
    </tr>
    <tr>
      <td class='line'>293</td><td class='count'>1</td>
      <td><pre class='prettyprint jmp'>		<span id='l293s0' title='Executions: 1' class='covered'>if (url == null</span> || <span id='l293s1' title='Executions: 1' class='covered'>url.equals(""))</span> <span id='l293s2' title='Executions: 0' class='uncovered'>throw new PageIllegalArgumentException(ERROR_URL_IS_NOT_SET);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>294</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l294s0'>		this.url            = this.createUrl(url);</pre></td>
    </tr>
    <tr>
      <td class='line'>295</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l295s0'>		this.requestHeader  = this.createRequestHeader(requestHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>296</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l296s0'>		this.responseHeader = this.createResponseHeader(responseHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>297</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l297s0'>		this.byteDump       = data;</pre></td>
    </tr>
    <tr>
      <td class='line'>298</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l298s0'>		this.eventHandler   = pageEventHandlerList;</pre></td>
    </tr>
    <tr>
      <td class='line'>299</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l299s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * ページ遷移実施&lt;p/>
	 * 指定されたFORMを元にページ遷移を実行、新たなページオブジェクトを生成し、返却します。&lt;br/>
	 * 以下の状態の場合、例外を送出します。&lt;br/>
	 * ・遷移先FORMが設定されていなかった場合&lt;br/>
	 * ・遷移先FORMの取得元が異なる場合（ページ1のFORMを取得し、ページ2にてページ1のformを使用してmoveした場合など）&lt;br/>
	 * ・遷移先FORMに遷移先URLが設定されていなかった場合(actionが設定されていなかった場合)&lt;br/>
	 * &lt;br/>
	 * 遷移の際に指定されたリクエストヘッダ、及びデフォルトのリクエストヘッダにて接続されます。&lt;br/>
	 * デフォルトリクエストヘッダはプロパティに設定された{@link jp.co.dk.browzer.property.BrowzerProperty.REQUEST_HEADER}の値がデフォルトとして設定されます。&lt;br/>
	 * &lt;br/>
	 * 例：指定されたリクエストヘッダ&lt;br/>
	 * header.request.header1=arg_example1&lt;br/>
	 * header.request.header2=arg_example2&lt;br/>
	 * &lt;br/>
	 * デフォルト（プロパティ）のリクエストヘッダ&lt;br/>
	 * header.request.header1=property_example1&lt;br/>
	 * header.request.header3=property_example3&lt;br/>
	 * &lt;br/>
	 * 上記の設定の場合、以下のリクエストヘッダを生成し、接続します。&lt;br/>
	 * header.request.header1=arg_example1&lt;br/>
	 * header.request.header2=arg_example2&lt;br/>
	 * header.request.header3=property_example3&lt;br/>
	 * &lt;br/>
	 * 
	 * @param form 遷移先FORM
	 * @param requestHeader リクエストヘッダ
	 * @return 遷移先のページオブジェクト
	 * @throws PageIllegalArgumentException URLが指定されていない、不正なURLが指定されていた場合
	 * @throws PageAccessException ページにアクセスした際にサーバが存在しない、ヘッダが不正、データの取得に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>332</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	Page move(jp.co.dk.browzer.html.element.Form form, Map&lt;String, String> requestHeader) throws PageIllegalArgumentException, PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>333</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l333s0' title='Executions: 0' class='uncovered'>if (form == null)</span> <span id='l333s1' title='Executions: 0' class='uncovered'>throw new PageIllegalArgumentException(ERROR_SPECIFIED_FORM_IS_NOT_SET);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>334</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l334s0' title='Executions: 0' class='uncovered'>if (!this.equals(form.getPage()))</span> <span id='l334s1' title='Executions: 0' class='uncovered'>throw new PageIllegalArgumentException(ERROR_FORM_THAT_HAS_BEEN_SPECIFIED_DOES_NOT_EXISTS_ON_THE_PAGE_THAT_IS_CURRENTLY_ACTIVE);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>335</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l335s0' title='Executions: 0' class='uncovered'>if (requestHeader == null)</span> <span id='l335s1' title='Executions: 0' class='uncovered'>requestHeader = new HashMap&lt;String, String>();</span></pre></td>
    </tr>
    <tr>
      <td class='line'>336</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l336s0'>		Map&lt;String, String> defaultRequestHeader  = this.getRequestHeaderByPorperty();</pre></td>
    </tr>
    <tr>
      <td class='line'>337</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l337s0'>		Map&lt;String, String> cookieRequestHeader   = this.getCookies();</pre></td>
    </tr>
    <tr>
      <td class='line'>338</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l338s0'>		defaultRequestHeader.putAll(cookieRequestHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>339</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l339s0'>		defaultRequestHeader.putAll(requestHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>340</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l340s0'>		return new Page(form, defaultRequestHeader, this.readDataFlg, this.eventHandler);</pre></td>
    </tr>
    <tr>
      <td class='line'>341</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * ホスト取得&lt;p>
	 * このページのホスト名を取得する。&lt;br/>
	 * 例：http://www.google.com/aaa/bbbの場合、www.google.comが取得されます。&lt;br/>
	 * 
	 * 
	 * @return URL文字列
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>351</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getHost() {</pre></td>
    </tr>
    <tr>
      <td class='line'>352</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l352s0'>		return this.url.getHost();</pre></td>
    </tr>
    <tr>
      <td class='line'>353</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * URL取得&lt;p>
	 * URLを取得する。
	 * 
	 * @return URL文字列
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>361</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getURL() {</pre></td>
    </tr>
    <tr>
      <td class='line'>362</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l362s0'>		return this.url.toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>363</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * URLオブジェクトを取得&lt;p>
	 * 
	 * @return URL文字列
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>370</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public URL getURLObject() {</pre></td>
    </tr>
    <tr>
      <td class='line'>371</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l371s0'>		return this.url.getUrlObject();</pre></td>
    </tr>
    <tr>
      <td class='line'>372</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのURLオブジェクトを返却します。
	 * @return URLオブジェクト
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>378</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Url getUrl() {</pre></td>
    </tr>
    <tr>
      <td class='line'>379</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l379s0'>		return this.url;</pre></td>
    </tr>
    <tr>
      <td class='line'>380</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * ドキュメントオブジェクトを取得する。&lt;p>
	 * デフォルトのドキュメントファクトリを使用し、このページが表すドキュメントオブジェクトを生成、返却します。&lt;br/>
	 * すでにドキュメントが生成されていた場合、キャッシュされているドキュメントオブジェクトを返却します。
	 * 
	 * @return ドキュメントオブジェクト
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>391</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public jp.co.dk.document.File getDocument() throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>392</td><td class='count'>2</td>
      <td><pre class='prettyprint jmp'>		<span id='l392s0' title='Executions: 2' class='covered'>if (this.document != null)</span> <span id='l392s1' title='Executions: 0' class='uncovered'>return this.document;</span></pre></td>
    </tr>
    <tr>
      <td class='line'>393</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l393s0'>		for (PageEventHandler handler : this.eventHandler) handler.beforeCreateDocument(this);</pre></td>
    </tr>
    <tr>
      <td class='line'>394</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>395</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l395s0'>			this.document = this.getDocument(new DocumentFactory(this));</pre></td>
    </tr>
    <tr>
      <td class='line'>396</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l396s0'>			return this.document;</pre></td>
    </tr>
    <tr>
      <td class='line'>397</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l397s0'>		} catch (PageAccessException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>398</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l398s0'>			for (PageEventHandler handler : this.eventHandler) handler.errorCreateDocument(e);</pre></td>
    </tr>
    <tr>
      <td class='line'>399</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l399s0'>			throw e;</pre></td>
    </tr>
    <tr>
      <td class='line'>400</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l400s0'>		}finally {</pre></td>
    </tr>
    <tr>
      <td class='line'>401</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l401s0'>			for (PageEventHandler handler : this.eventHandler) handler.afterCreateDocument(this);</pre></td>
    </tr>
    <tr>
      <td class='line'>402</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l402s0'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>403</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * ドキュメントオブジェクトを取得する。&lt;p>
	 * 指定のドキュメントファクトリを使用し、このページが表すドキュメントオブジェクトを生成、返却します。&lt;br/>
	 * &lt;br/>
	 * 生成は以下の順で行われます。&lt;br/>
	 * &lt;br/>
	 * 1.このページの接続時に得られたHTTPヘッダのContents-Typeを取得、そのContents-Typeを元にドキュメントファクトリからドキュメントを生成します。&lt;br/>
	 * 2.Contents-Typeが取得できなかった場合、URLに設定されたファイルの拡張子を元にドキュメントファクトリからドキュメントを生成します。&lt;br/>
	 * 3.上記にてドキュメントが生成できなかった場合、例外を発生します。
	 * &lt;br/>
	 * @param documentFactory ドキュメント生成ファクトリ
	 * @return ドキュメントオブジェクト
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>420</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public jp.co.dk.document.File getDocument(DocumentFactory documentFactory) throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>421</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l421s0'>		InputStream inputStream = this.getData().getStream();</pre></td>
    </tr>
    <tr>
      <td class='line'>422</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l422s0'>		ContentsType contentsType = this.responseHeader.getContentsType();</pre></td>
    </tr>
    <tr>
      <td class='line'>423</td><td class='count'>2</td>
      <td><pre class='prettyprint jmp'>		<span id='l423s0' title='Executions: 2' class='covered'>if (contentsType != null)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>424</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l424s0'>			this.document = documentFactory.create(contentsType, inputStream);</pre></td>
    </tr>
    <tr>
      <td class='line'>425</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l425s0'>			return this.document;</pre></td>
    </tr>
    <tr>
      <td class='line'>426</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>427</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l427s0'>			BrowzingExtension extension = this.getExtension(this.getFileName());</pre></td>
    </tr>
    <tr>
      <td class='line'>428</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l428s0'>			this.document = documentFactory.create(extension, inputStream);</pre></td>
    </tr>
    <tr>
      <td class='line'>429</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l429s0'>			return this.document;</pre></td>
    </tr>
    <tr>
      <td class='line'>430</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>431</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * URLに設定されているパラメータを取得する。&lt;p>
	 * パラメータが設定されていない場合、空のマップを返却します。
	 * 
	 * @return パラメータのマップ
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>439</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Map&lt;String, String> getParameter() {</pre></td>
    </tr>
    <tr>
      <td class='line'>440</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l440s0'>		return this.url.getParameter();</pre></td>
    </tr>
    <tr>
      <td class='line'>441</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このURLのパス文字列を取得します。&lt;p>
	 * 例：&lt;br/>
	 * http://xxx.jp/aaa/bbb 、 http://xxx.jp/aaa/bbb/ 、http://xxx.jp/aaa/bbb/ccc.html の場合、aaa/bbb/をを返却します。&lt;br/>
	 * http://xxx.jp/ や http://xxx.jp の場合、空文字を返却します。&lt;br/>
	 * 
	 * @return パス文字列
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>451</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getPath() {</pre></td>
    </tr>
    <tr>
      <td class='line'>452</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l452s0'>		List&lt;String> pathList = this.url.getPathList();</pre></td>
    </tr>
    <tr>
      <td class='line'>453</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l453s0' title='Executions: 0' class='uncovered'>if (pathList.size() == 0)</span> <span id='l453s1' title='Executions: 0' class='uncovered'>return "";</span></pre></td>
    </tr>
    <tr>
      <td class='line'>454</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l454s0'>		String fileName = this.getFileName();</pre></td>
    </tr>
    <tr>
      <td class='line'>455</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l455s0'>		StringBuilder sb = new StringBuilder();</pre></td>
    </tr>
    <tr>
      <td class='line'>456</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l456s0'>		for (String path : pathList) {</pre></td>
    </tr>
    <tr>
      <td class='line'>457</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>			<span id='l457s0' title='Executions: 0' class='uncovered'>if (fileName.equals(path))</span> break; </pre></td>
    </tr>
    <tr>
      <td class='line'>458</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l458s0'>			sb.append(path).append('/');</pre></td>
    </tr>
    <tr>
      <td class='line'>459</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>460</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l460s0'>		return sb.toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>461</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このURLのパス一覧を取得します。
	 * 例：&lt;br/>
	 * http://xxx.jp/aaa/bbb 、 http://xxx.jp/aaa/bbb/ 、http://xxx.jp/aaa/bbb/ccc.html の場合、List["aaa","bbb"]をを返却します。&lt;br/>
	 * http://xxx.jp/ や http://xxx.jp の場合、空のリストを返却します。&lt;br/>
	 * @return パス一覧
	 * 
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>471</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;String> getPathList() {</pre></td>
    </tr>
    <tr>
      <td class='line'>472</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l472s0'>		return this.url.getPathList();</pre></td>
    </tr>
    <tr>
      <td class='line'>473</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このURLのファイル名を取得する。&lt;p>
	 * URLにファイル名が設定されていない場合、デフォルトのファイル名を返却する。
	 * 
	 * 例：&lt;br/>
	 * http://xxx.jp、http://xxx.jp/、http://xxx.jp/aaa/bbb 、 http://xxx.jp/aaa/bbb/ の場合、デフォルトのファイル名（index.html）を返却します。&lt;br/>
	 * http://xxx.jp/aaa/bbb/ccc.htmlの場合、ccc.htmlを返却します。&lt;br/>
	 * 
	 * @return ファイル名
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>485</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getFileName() {</pre></td>
    </tr>
    <tr>
      <td class='line'>486</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l486s0'>		List&lt;String> pathList = this.url.getPathList();</pre></td>
    </tr>
    <tr>
      <td class='line'>487</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l487s0' title='Executions: 0' class='uncovered'>if (pathList == null</span> || <span id='l487s1' title='Executions: 0' class='uncovered'>pathList.size() == 0)</span> <span id='l487s2' title='Executions: 0' class='uncovered'>return this.defaultFileName(responseHeader);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>488</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l488s0'>		String lastPath = pathList.get(pathList.size()-1);</pre></td>
    </tr>
    <tr>
      <td class='line'>489</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l489s0' title='Executions: 0' class='uncovered'>if (lastPath.lastIndexOf('.') == -1)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>490</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l490s0'>			return this.defaultFileName(responseHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>491</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>492</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l492s0'>			return lastPath;</pre></td>
    </tr>
    <tr>
      <td class='line'>493</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>494</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このURLのファイルの拡張子を取得する。&lt;p>
	 * URLにファイル名が設定されていない場合、空文字を返却する。&lt;br/>
	 * 
	 * 例：&lt;br/>
	 * http://xxx.jp、http://xxx.jp/、http://xxx.jp/aaa/bbb 、 http://xxx.jp/aaa/bbb/ の場合、デフォルトのファイル名（index.html）の拡張子、"html"を返却、&lt;br/>
	 * http://xxx.jp/aaa/bbb/ccc.htmlの場合、"html"を返却します。&lt;br/>
	 * http://xxx.jp/aaa/bbb/ccc.jpgの場合、"jpg"を返却します。&lt;br/>
	 * 
	 * @return 拡張子名
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>507</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getExtension() {</pre></td>
    </tr>
    <tr>
      <td class='line'>508</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l508s0'>		String fileName = this.getFileName();</pre></td>
    </tr>
    <tr>
      <td class='line'>509</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l509s0'>		int extentionIndex = fileName.lastIndexOf(".");</pre></td>
    </tr>
    <tr>
      <td class='line'>510</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l510s0' title='Executions: 0' class='uncovered'>if (extentionIndex == -1)</span> <span id='l510s1' title='Executions: 0' class='uncovered'>return "";</span></pre></td>
    </tr>
    <tr>
      <td class='line'>511</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l511s0'>		return fileName.substring(extentionIndex + 1);</pre></td>
    </tr>
    <tr>
      <td class='line'>512</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * プロトコルを取得します。&lt;p>
	 * 
	 * @return プロトコルを表す文字列
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>519</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getProtocol() {</pre></td>
    </tr>
    <tr>
      <td class='line'>520</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l520s0'>		return this.url.getProtocol();</pre></td>
    </tr>
    <tr>
      <td class='line'>521</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * &lt;p>このページ内の文字列を取得する。&lt;/p>
	 * このページがHTMLの場合に限り、このページの文字列を取得する。&lt;br/>
	 * それ以外の場合、空文字を返却する。
	 * 
	 * @return ページ内の文字列
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>530</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getText() {</pre></td>
    </tr>
    <tr>
      <td class='line'>531</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l531s0' title='Executions: 0' class='uncovered'>if (!(this.document instanceof HtmlDocument))</span> <span id='l531s1' title='Executions: 0' class='uncovered'>return "";</span></pre></td>
    </tr>
    <tr>
      <td class='line'>532</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l532s0'>		HtmlDocument htmlDocument = (HtmlDocument)this.document;</pre></td>
    </tr>
    <tr>
      <td class='line'>533</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l533s0'>		return htmlDocument.getContent();</pre></td>
    </tr>
    <tr>
      <td class='line'>534</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * アンカー一覧を取得します。&lt;p/>
	 * このページに存在するすべてのアンカータグを取得します。&lt;br/>
	 * このページがHTMLでない場合、例外を送出します。
	 * 
	 * @return アンカー一覧 
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した、またはこのページがHTMLでない場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>545</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;A> getAnchor() throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>546</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l546s0'>		jp.co.dk.document.File document = this.getDocument();</pre></td>
    </tr>
    <tr>
      <td class='line'>547</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l547s0' title='Executions: 0' class='uncovered'>if (!(document instanceof HtmlDocument))</span> <span id='l547s1' title='Executions: 0' class='uncovered'>throw new DocumentException(ERROR_THIS_PAGE_CAN_NOT_BE_USERD_TO_OBTAIN_THE_ANCHOR_BECAUSE_IT_IS_NOT_HTML);</span> </pre></td>
    </tr>
    <tr>
      <td class='line'>548</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l548s0'>		HtmlDocument htmlDocument = (HtmlDocument)document;</pre></td>
    </tr>
    <tr>
      <td class='line'>549</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l549s0'>		List&lt;Element> elementList = htmlDocument.getElement(HtmlElementName.A);</pre></td>
    </tr>
    <tr>
      <td class='line'>550</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l550s0'>		List&lt;A> anchorList = new ArrayList&lt;A>();</pre></td>
    </tr>
    <tr>
      <td class='line'>551</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l551s0'>		for (Element element : elementList){</pre></td>
    </tr>
    <tr>
      <td class='line'>552</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>			<span id='l552s0' title='Executions: 0' class='uncovered'>if (element instanceof A)</span> <span id='l552s1' title='Executions: 0' class='uncovered'>anchorList.add((A)element);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>553</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>554</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l554s0'>		return anchorList;</pre></td>
    </tr>
    <tr>
      <td class='line'>555</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのURLとドメインが同一のアンカー一覧を取得します。&lt;p/>
	 * このページに存在するすべてのアンカータグを取り出し、このページと同じドメインのURLのみ抽出し返却します。&lt;br/>
	 * このページと同じドメインのアンカータグが存在しなかった場合、空のリストを返却します。&lt;br/>
	 * このページがHTMLでない場合、例外を送出します。
	 * 
	 * @return 同じドメインのアンカー一覧 
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した、またはこのページがHTMLでない場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>567</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;A> getAnchorSameDomain() throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>568</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l568s0'>		List&lt;A> allAnchorList        = this.getAnchor();</pre></td>
    </tr>
    <tr>
      <td class='line'>569</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l569s0'>		List&lt;A> sameDomainAnchorList = new ArrayList&lt;A>();</pre></td>
    </tr>
    <tr>
      <td class='line'>570</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l570s0'>		String  thisPageDmain        = this.url.getHost();</pre></td>
    </tr>
    <tr>
      <td class='line'>571</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l571s0'>		for (A anchor : allAnchorList) {</pre></td>
    </tr>
    <tr>
      <td class='line'>572</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			try {</pre></td>
    </tr>
    <tr>
      <td class='line'>573</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l573s0'>				Url url = new Url(anchor.getUrl());</pre></td>
    </tr>
    <tr>
      <td class='line'>574</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l574s0'>				String anchorsDomain = url.getHost();</pre></td>
    </tr>
    <tr>
      <td class='line'>575</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l575s0' title='Executions: 0' class='uncovered'>if (thisPageDmain.equals(anchorsDomain))</span> <span id='l575s1' title='Executions: 0' class='uncovered'>sameDomainAnchorList.add(anchor);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>576</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l576s0'>			} catch (PageIllegalArgumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>577</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				continue;</pre></td>
    </tr>
    <tr>
      <td class='line'>578</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>579</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>580</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l580s0'>		return sameDomainAnchorList;</pre></td>
    </tr>
    <tr>
      <td class='line'>581</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのURLとドメインとパスが同一のアンカー一覧を取得します。&lt;p/>
	 * このページに存在するすべてのアンカータグを取り出し、このページと同じドメインとパスのURLのみ抽出し返却します。&lt;br/>
	 * このページと同じドメインとパスのアンカータグが存在しなかった場合、空のリストを返却します。&lt;br/>
	 * このページがHTMLでない場合、例外を送出します。
	 * 
	 * @return 同じドメインとパスのアンカー一覧 
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した、またはこのページがHTMLでない場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>593</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;A> getAnchorSamePath() throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>594</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l594s0'>		List&lt;A>      allAnchorList        = this.getAnchor();</pre></td>
    </tr>
    <tr>
      <td class='line'>595</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l595s0'>		List&lt;A>      sameDomainAnchorList = new ArrayList&lt;A>();</pre></td>
    </tr>
    <tr>
      <td class='line'>596</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l596s0'>		String       thisPageDmain        = this.url.getHost();</pre></td>
    </tr>
    <tr>
      <td class='line'>597</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l597s0'>		List&lt;String> thisPagePathList     = this.url.getPathList();</pre></td>
    </tr>
    <tr>
      <td class='line'>598</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l598s0'>		for (A anchor : allAnchorList) {</pre></td>
    </tr>
    <tr>
      <td class='line'>599</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			try {</pre></td>
    </tr>
    <tr>
      <td class='line'>600</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l600s0'>				Url url = new Url(anchor.getUrl());</pre></td>
    </tr>
    <tr>
      <td class='line'>601</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l601s0'>				String anchorsDomain         = url.getHost();</pre></td>
    </tr>
    <tr>
      <td class='line'>602</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l602s0'>				List&lt;String> anchorsPathList = url.getPathList();</pre></td>
    </tr>
    <tr>
      <td class='line'>603</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l603s0' title='Executions: 0' class='uncovered'>if (thisPageDmain.equals(anchorsDomain)</span> && <span id='l603s1' title='Executions: 0' class='uncovered'>thisPagePathList.equals(anchorsPathList))</span> <span id='l603s2' title='Executions: 0' class='uncovered'>sameDomainAnchorList.add(anchor);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>604</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l604s0'>			} catch (PageIllegalArgumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>605</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				continue;</pre></td>
    </tr>
    <tr>
      <td class='line'>606</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>607</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>608</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l608s0'>		return sameDomainAnchorList;</pre></td>
    </tr>
    <tr>
      <td class='line'>609</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページに存在するアンカーで拡張子がhtml,htmのアンカー一覧を取得します。&lt;p/>
	 * このページに存在するすべてのアンカータグを取り出し、アンカーに定義されているURLでhtml,htmと定義されているアンカーを抽出し返却します。&lt;br/>
	 * 該当のアンカーが存在しなかった場合、空のリストを返却します。&lt;br/>
	 * このページがHTMLでない場合、例外を送出します。
	 * 
	 * @return このページに存在するアンカーで拡張子がhtml,htmのアンカー一覧 
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した、またはこのページがHTMLでない場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>621</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;A> getAnchorIncludeHtml() throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>622</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l622s0'>		List&lt;A>      allAnchorList        = this.getAnchor();</pre></td>
    </tr>
    <tr>
      <td class='line'>623</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l623s0'>		List&lt;A>      sameDomainAnchorList = new ArrayList&lt;A>();</pre></td>
    </tr>
    <tr>
      <td class='line'>624</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l624s0'>		for (A anchor : allAnchorList) {</pre></td>
    </tr>
    <tr>
      <td class='line'>625</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			try {</pre></td>
    </tr>
    <tr>
      <td class='line'>626</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l626s0'>				Url url = new Url(anchor.getUrl());</pre></td>
    </tr>
    <tr>
      <td class='line'>627</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l627s0'>				List&lt;String> anchorsPathList = url.getPathList();</pre></td>
    </tr>
    <tr>
      <td class='line'>628</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l628s0' title='Executions: 0' class='uncovered'>if (anchorsPathList.size() != 0)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>629</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l629s0'>					String lastPath = anchorsPathList.get(anchorsPathList.size()-1);</pre></td>
    </tr>
    <tr>
      <td class='line'>630</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>					<span id='l630s0' title='Executions: 0' class='uncovered'>if (lastPath.endsWith(".html")</span> || <span id='l630s1' title='Executions: 0' class='uncovered'>lastPath.endsWith(".htm"))</span> <span id='l630s2' title='Executions: 0' class='uncovered'>sameDomainAnchorList.add(anchor);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>631</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				}</pre></td>
    </tr>
    <tr>
      <td class='line'>632</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l632s0'>			} catch (PageIllegalArgumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>633</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				continue;</pre></td>
    </tr>
    <tr>
      <td class='line'>634</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>635</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>636</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l636s0'>		return sameDomainAnchorList;</pre></td>
    </tr>
    <tr>
      <td class='line'>637</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページに存在するアンカーでhtml,htm以外の拡張子を保持するアンカー一覧を取得します。&lt;p/>
	 * このページに存在するすべてのアンカータグを取り出し、アンカーに定義されているURLで拡張子が定義されているアンカーを抽出し返却します。&lt;br/>
	 * 該当のアンカーが存在しなかった場合、空のリストを返却します。&lt;br/>
	 * このページがHTMLでない場合、例外を送出します。
	 * 
	 * @return このページに存在するアンカーでhtml,htm以外の拡張子を保持するアンカー一覧
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した、またはこのページがHTMLでない場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>649</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;A> getAnchorExcludeHtml() throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>650</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l650s0'>		List&lt;A>      allAnchorList        = this.getAnchor();</pre></td>
    </tr>
    <tr>
      <td class='line'>651</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l651s0'>		List&lt;A>      sameDomainAnchorList = new ArrayList&lt;A>();</pre></td>
    </tr>
    <tr>
      <td class='line'>652</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l652s0'>		for (A anchor : allAnchorList) {</pre></td>
    </tr>
    <tr>
      <td class='line'>653</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			try {</pre></td>
    </tr>
    <tr>
      <td class='line'>654</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l654s0'>				Url url = new Url(anchor.getUrl());</pre></td>
    </tr>
    <tr>
      <td class='line'>655</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l655s0'>				List&lt;String> anchorsPathList = url.getPathList();</pre></td>
    </tr>
    <tr>
      <td class='line'>656</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l656s0' title='Executions: 0' class='uncovered'>if (anchorsPathList.size() != 0)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>657</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l657s0'>					String lastPath = anchorsPathList.get(anchorsPathList.size()-1);</pre></td>
    </tr>
    <tr>
      <td class='line'>658</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>					<span id='l658s0' title='Executions: 0' class='uncovered'>if (lastPath.indexOf(".") != -1</span> && <span id='l658s1' title='Executions: 0' class='uncovered'>!(lastPath.endsWith(".html")</span> || <span id='l658s2' title='Executions: 0' class='uncovered'>lastPath.endsWith(".htm")))</span> <span id='l658s3' title='Executions: 0' class='uncovered'>sameDomainAnchorList.add(anchor);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>659</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				}</pre></td>
    </tr>
    <tr>
      <td class='line'>660</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l660s0'>			} catch (PageIllegalArgumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>661</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				continue;</pre></td>
    </tr>
    <tr>
      <td class='line'>662</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>663</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>664</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l664s0'>		return sameDomainAnchorList;</pre></td>
    </tr>
    <tr>
      <td class='line'>665</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * フォーム一覧を取得します。&lt;p/>
	 * このページに存在するすべてのフォームタグを取得します。&lt;br/>
	 * このページがHTMLでない場合、例外を送出します。
	 * 
	 * @return フォーム一覧
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した、またはこのページがHTMLでない場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>676</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public List&lt;Form> getForm() throws PageAccessException, DocumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>677</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l677s0'>		jp.co.dk.document.File document = this.getDocument();</pre></td>
    </tr>
    <tr>
      <td class='line'>678</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l678s0' title='Executions: 0' class='uncovered'>if (!(document instanceof HtmlDocument))</span> <span id='l678s1' title='Executions: 0' class='uncovered'>throw new DocumentException(ERROR_THIS_PAGE_CAN_NOT_BE_USERD_TO_OBTAIN_THE_ANCHOR_BECAUSE_IT_IS_NOT_HTML);</span> </pre></td>
    </tr>
    <tr>
      <td class='line'>679</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l679s0'>		HtmlDocument htmlDocument = (HtmlDocument)document;</pre></td>
    </tr>
    <tr>
      <td class='line'>680</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l680s0'>		List&lt;Element> elementList = htmlDocument.getElement(HtmlElementName.FORM);</pre></td>
    </tr>
    <tr>
      <td class='line'>681</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l681s0'>		List&lt;Form> formList = new ArrayList&lt;Form>();</pre></td>
    </tr>
    <tr>
      <td class='line'>682</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l682s0'>		for (Element element : elementList){</pre></td>
    </tr>
    <tr>
      <td class='line'>683</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>			<span id='l683s0' title='Executions: 0' class='uncovered'>if (element instanceof Form)</span> <span id='l683s1' title='Executions: 0' class='uncovered'>formList.add((Form)element);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>684</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>685</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l685s0'>		return formList;</pre></td>
    </tr>
    <tr>
      <td class='line'>686</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのサイズ(byte)を取得します。&lt;p/>
	 * このページ接続時のヘッダ情報（レスポンスヘッダ内のContent-Length）からこのページのサイズ（byte）をlongで取得します。&lt;br/>
	 * ヘッダにContent-Lengthが設定されていなかった場合、または不正な値が設定されていた場合、Content-Lengthが複数設定されており正しい値が判定できない場合は-1が返却されます。
	 * 
	 * @return サイズ（byte）
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>695</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public long getSize() {</pre></td>
    </tr>
    <tr>
      <td class='line'>696</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l696s0'>		return this.responseHeader.getContentLength();</pre></td>
    </tr>
    <tr>
      <td class='line'>697</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのデータを取得します。
	 * 
	 * このページがすでにデータを取得しており、メモリー内に読み込み済みだった場合、そのデータを返却します。&lt;br/>
	 * このページのデータを読み込んでいなかった場合、ページからそのデータをダウンロード、メモリー内に保存してから返却します。
	 * 
	 * @return バイトダンプのインスタンス
	 * @throws PageAccessException 読み込みにて例外が発生した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>708</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public ByteDump getData() throws PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>709</td><td class='count'>2</td>
      <td><pre class='prettyprint jmp'>		<span id='l709s0' title='Executions: 2' class='covered'>if (this.byteDump == null)</span> <span id='l709s1' title='Executions: 0' class='uncovered'>this.byteDump = this.getByteDump(this.connection);</span> </pre></td>
    </tr>
    <tr>
      <td class='line'>710</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l710s0'>		return this.byteDump;</pre></td>
    </tr>
    <tr>
      <td class='line'>711</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのリクエストヘッダを取得します。&lt;p/>
	 * 
	 * @return リクエストヘッダ
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>718</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public RequestHeader getRequestHeader() {</pre></td>
    </tr>
    <tr>
      <td class='line'>719</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l719s0'>		return this.requestHeader;</pre></td>
    </tr>
    <tr>
      <td class='line'>720</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのレスポンスヘッダを取得します。&lt;p/>
	 * 
	 * @return レスポンスヘッダ
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>727</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public ResponseHeader getResponseHeader() {</pre></td>
    </tr>
    <tr>
      <td class='line'>728</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l728s0'>		return this.responseHeader;</pre></td>
    </tr>
    <tr>
      <td class='line'>729</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このURLが示すリンク先を指定のディレクトリへ保存を実行します。&lt;p>
	 * &lt;br/>
	 * 以下の条件の場合、例外を発生する。&lt;br/>
	 * ・指定された保存先ディレクトリが存在しない場合&lt;br/>
	 * ・指定された保存先ディレクトリがディレクトリが存在しない場合&lt;br/>
	 * ・保存先のファイルがすでに存在する場合&lt;br/>
	 * 
	 * @param path ダウンロード先ディレクトリパス
	 * @return 保存したファイルのオブジェクト
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した場合
	 * @throws PageSaveException ページの保存に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>745</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public File save(File path) throws PageAccessException, DocumentException, PageSaveException {</pre></td>
    </tr>
    <tr>
      <td class='line'>746</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l746s0'>		jp.co.dk.document.File document = this.getDocument();</pre></td>
    </tr>
    <tr>
      <td class='line'>747</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>748</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l748s0'>			return document.save(path, this.getFileName());</pre></td>
    </tr>
    <tr>
      <td class='line'>749</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l749s0'>		} catch (DocumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>750</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l750s0'>			throw new PageSaveException(ERROR_FAILED_TO_DOWNLOAD, this.url.getURL(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>751</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>752</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このURLが示すリンク先を指定のディレクトリへ指定のファイル名で保存を実行します。&lt;p>
	 * &lt;br/>
	 * 以下の条件の場合、例外を発生する。&lt;br/>
	 * ・指定された保存先ディレクトリが存在しない場合&lt;br/>
	 * ・指定された保存先ディレクトリがディレクトリが存在しない場合&lt;br/>
	 * ・保存先のファイルがすでに存在する場合&lt;br/>
	 * 
	 * @param path ダウンロード先ディレクトリパス
	 * @return 保存したファイルのオブジェクト
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した場合
	 * @throws PageSaveException ページの保存に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>768</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public File save(File path, String fileName) throws PageAccessException, DocumentException, PageSaveException {</pre></td>
    </tr>
    <tr>
      <td class='line'>769</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l769s0'>		jp.co.dk.document.File document = this.getDocument();</pre></td>
    </tr>
    <tr>
      <td class='line'>770</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>771</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l771s0'>			return document.save(path, fileName);</pre></td>
    </tr>
    <tr>
      <td class='line'>772</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l772s0'>		} catch (DocumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>773</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l773s0'>			throw new PageSaveException(ERROR_FAILED_TO_DOWNLOAD, this.url.getURL(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>774</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>775</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * 指定のURLの文字列を元にUrlオブジェクトを生成し、返却します。
	 * @param url URL文字列
	 * @return Urlオブジェクト
	 * @throws PageIllegalArgumentException URL文字列がnullまたは、空文字だった場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>783</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected Url createUrl(String url) throws PageIllegalArgumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>784</td><td class='count'>6</td>
      <td><pre class='prettyprint covered' id='l784s0'>		return new Url(url);</pre></td>
    </tr>
    <tr>
      <td class='line'>785</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このURLが示すリンク先を指定のディレクトリへダウンロードを実行します。&lt;p>
	 * 指定のパスにディレクトリ以外が設定された場合、例外を発生します。&lt;br/>
	 * 
	 * @param path ダウンロード先ディレクトリパス
	 * @throws PageAccessException ページデータの取得に失敗した場合
	 * @throws DocumentException ドキュメントオブジェクトの生成に失敗した場合
	 * @throws PageSaveException ページの保存に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>796</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected void download(File path) throws PageAccessException, DocumentException, PageSaveException {</pre></td>
    </tr>
    <tr>
      <td class='line'>797</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l797s0'>		StringBuilder pathStr = new StringBuilder(path.getAbsolutePath()).append('/').append(this.url.getHost()).append('/').append(this.getPath());</pre></td>
    </tr>
    <tr>
      <td class='line'>798</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l798s0'>		File downloadPath = new File(pathStr.toString());</pre></td>
    </tr>
    <tr>
      <td class='line'>799</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>800</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l800s0'>			downloadPath.mkdirs();</pre></td>
    </tr>
    <tr>
      <td class='line'>801</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l801s0'>		} catch (SecurityException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>802</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l802s0'>			throw new PageSaveException(ERROR_COULD_NOT_CREATE_DOWNLOAD_DIRECTORY, pathStr.toString(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>803</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>804</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l804s0'>		jp.co.dk.document.File document = this.getDocument();</pre></td>
    </tr>
    <tr>
      <td class='line'>805</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>806</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l806s0'>			document.save(downloadPath, this.getFileName());</pre></td>
    </tr>
    <tr>
      <td class='line'>807</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l807s0'>		} catch (DocumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>808</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l808s0'>			throw new PageSaveException(ERROR_FAILED_TO_DOWNLOAD, this.url.getURL(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>809</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>810</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l810s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのURLから引数に設定されたURLで補完し、新しいURLを返却します。
	 * 
	 * @param url 補完対象URL
	 * @return 補完済みURL
	 * @throws PageIllegalArgumentException 補完に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>819</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String completionURL(String url) throws PageIllegalArgumentException {</pre></td>
    </tr>
    <tr>
      <td class='line'>820</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>821</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l821s0'>			return new URL(this.url.getUrlObject(), url).toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>822</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l822s0'>		} catch (MalformedURLException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>823</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l823s0'>			throw new PageIllegalArgumentException(ERROR_COMPRETION_URL, new String[]{this.url.getURL(), url}, e);</pre></td>
    </tr>
    <tr>
      <td class='line'>824</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>825</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * 指定のURLオブジェクトからURLコネクションを指定メソッドで生成します。&lt;p>
	 * 
	 * @param urlObj URLオブジェクト
	 * @param method HTTPメソッド
	 * @return URLコネクション
	 * @throws BrowzingException URLが参照するリモートオブジェクトへの接続時に入出力例外が発生した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>835</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected HttpURLConnection createURLConnection(URL urlObj, HtmlRequestMethodName method) throws PageAccessException{</pre></td>
    </tr>
    <tr>
      <td class='line'>836</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l836s0'>		for (PageEventHandler handler : this.eventHandler) handler.beforeOpenConnection(this.url, method);</pre></td>
    </tr>
    <tr>
      <td class='line'>837</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		HttpURLConnection urlConnection;</pre></td>
    </tr>
    <tr>
      <td class='line'>838</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>839</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l839s0'>			urlConnection = (HttpURLConnection)urlObj.openConnection();</pre></td>
    </tr>
    <tr>
      <td class='line'>840</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l840s0'>			urlConnection.setRequestMethod(method.getMethod());</pre></td>
    </tr>
    <tr>
      <td class='line'>841</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l841s0'>			urlConnection.setDoOutput(true);</pre></td>
    </tr>
    <tr>
      <td class='line'>842</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l842s0'>			urlConnection.setDoInput(true);</pre></td>
    </tr>
    <tr>
      <td class='line'>843</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l843s0'>			urlConnection.setFollowRedirects(false);</pre></td>
    </tr>
    <tr>
      <td class='line'>844</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l844s0'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>845</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l845s0'>			PageAccessException pageAccessException = new PageAccessException( ERROR_INPUT_OUTPUT_EXCEPTION_OCCURRED_WHEN_CONNECTING_TO_A_URL, urlObj.toString(), e );</pre></td>
    </tr>
    <tr>
      <td class='line'>846</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l846s0'>			for (PageEventHandler handler : this.eventHandler) handler.errorOpenConnection(pageAccessException);</pre></td>
    </tr>
    <tr>
      <td class='line'>847</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l847s0'>			throw pageAccessException;</pre></td>
    </tr>
    <tr>
      <td class='line'>848</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l848s0'>		} finally {</pre></td>
    </tr>
    <tr>
      <td class='line'>849</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l849s0'>			for (PageEventHandler handler : this.eventHandler) handler.afterOpenConnection();</pre></td>
    </tr>
    <tr>
      <td class='line'>850</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l850s0'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>851</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l851s0'>		return urlConnection;</pre></td>
    </tr>
    <tr>
      <td class='line'>852</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * 指定のURLコネクションから入力ストリームを取得します。&lt;p>
	 * 
	 * @param connection URLコネクション
	 * @return 入力ストリーム
	 * @throws PageAccessException 入力ストリームの作成中に入出力エラーが発生した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>862</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected InputStream getUrlInputStream( URLConnection connection ) throws PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>863</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		InputStream inputStream;</pre></td>
    </tr>
    <tr>
      <td class='line'>864</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>865</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l865s0'>			inputStream = connection.getInputStream();</pre></td>
    </tr>
    <tr>
      <td class='line'>866</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l866s0'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>867</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l867s0'>			throw new PageAccessException(ERROR_IO_ERROR_WAS_OCCURRED_WHILE_CREATING_THE_INPUT_STREAM, this.url.toString() ,e);</pre></td>
    </tr>
    <tr>
      <td class='line'>868</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>869</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l869s0'>		return inputStream;</pre></td>
    </tr>
    <tr>
      <td class='line'>870</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * 指定のパスにあるファイル名の拡張子文字列を取得します。&lt;p>
	 * 拡張子が設定されていない場合、空文字を返却します。
	 * 
	 * @param path パス文字列
	 * @return 拡張子
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>879</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected BrowzingExtension getExtension(String path) {</pre></td>
    </tr>
    <tr>
      <td class='line'>880</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String urlExtension;</pre></td>
    </tr>
    <tr>
      <td class='line'>881</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l881s0'>		int index = path.lastIndexOf('.');</pre></td>
    </tr>
    <tr>
      <td class='line'>882</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l882s0' title='Executions: 0' class='uncovered'>if (index == -1 )</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>883</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l883s0'>			urlExtension = "";</pre></td>
    </tr>
    <tr>
      <td class='line'>884</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l884s0'>		} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>885</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l885s0'>			urlExtension = path.substring(index+1);</pre></td>
    </tr>
    <tr>
      <td class='line'>886</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>887</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l887s0'>		for (BrowzingExtension extension : BrowzingExtension.values()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>888</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>			<span id='l888s0' title='Executions: 0' class='uncovered'>if (extension.hasExtension(urlExtension))</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>889</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l889s0'>				return extension;</pre></td>
    </tr>
    <tr>
      <td class='line'>890</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>891</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>892</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l892s0'>		return null;</pre></td>
    </tr>
    <tr>
      <td class='line'>893</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * 指定のURLコネクションへ指定のリクエストヘッダマップに設定されているリクエストヘッダを設定します。&lt;p>
	 * リクエストヘッダが未指定の場合はそのまま返却します。
	 * 
	 * @param connection URLコネクション
	 * @param requestMap リクエストヘッダマップ
	 * @return リクエストヘッダが設定されたURLコネクション
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>903</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected URLConnection setRequestProperty(URLConnection connection ,Map&lt;String,String> requestMap) {</pre></td>
    </tr>
    <tr>
      <td class='line'>904</td><td class='count'>4</td>
      <td><pre class='prettyprint jmp'>		<span id='l904s0' title='Executions: 4' class='covered'>if ( connection == null</span> || <span id='l904s1' title='Executions: 4' class='covered'>requestMap == null)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>905</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l905s0'>			return connection;</pre></td>
    </tr>
    <tr>
      <td class='line'>906</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>907</td><td class='count'>11</td>
      <td><pre class='prettyprint covered' id='l907s0'>		for (String key : requestMap.keySet()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>908</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l908s0'>			connection.setRequestProperty(key, requestMap.get(key));</pre></td>
    </tr>
    <tr>
      <td class='line'>909</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>910</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l910s0'>		return connection;</pre></td>
    </tr>
    <tr>
      <td class='line'>911</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのURLがトレイリングスラッシュを保持するかを判定する。&lt;p>
	 * 
	 * @return 判定結果（true=スラッシュあり、false=スラッシュなし）
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>918</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected boolean hasTrailingSlash() { </pre></td>
    </tr>
    <tr>
      <td class='line'>919</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l919s0'>		String path=this.getPath();</pre></td>
    </tr>
    <tr>
      <td class='line'>920</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l920s0' title='Executions: 0' class='uncovered'>return path.indexOf('/') == path.length();</span></pre></td>
    </tr>
    <tr>
      <td class='line'>921</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * リクエストヘッダ生成&lt;p/>
	 * プロパティのBrowzerProperty.REQUEST_HEADERからリクエストヘッダを取得し、マップへ変換し返却します。
	 * 
	 * @return map リクエストヘッダマップ
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>929</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected Map&lt;String, String> getRequestHeaderByPorperty() {</pre></td>
    </tr>
    <tr>
      <td class='line'>930</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l930s0'>		Map&lt;String, String> map = new HashMap&lt;String, String>();</pre></td>
    </tr>
    <tr>
      <td class='line'>931</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l931s0'>		java.util.List&lt;Property> requestHeader = BrowzerProperty.REQUEST_HEADER.getPropertyList();</pre></td>
    </tr>
    <tr>
      <td class='line'>932</td><td class='count'>9</td>
      <td><pre class='prettyprint covered' id='l932s0'>		for (Property property : requestHeader) {</pre></td>
    </tr>
    <tr>
      <td class='line'>933</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l933s0'>			String[] list = property.getStringArray();</pre></td>
    </tr>
    <tr>
      <td class='line'>934</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l934s0'>			StringBuilder sb = new StringBuilder();</pre></td>
    </tr>
    <tr>
      <td class='line'>935</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l935s0'>			for (String value : list)sb.append(value).append(',');</pre></td>
    </tr>
    <tr>
      <td class='line'>936</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l936s0'>			map.put(property.getKey(), sb.toString().substring(0, sb.length()-1));</pre></td>
    </tr>
    <tr>
      <td class='line'>937</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>938</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l938s0'>		return map;</pre></td>
    </tr>
    <tr>
      <td class='line'>939</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * クッキー取得&lt;p/>
	 * 本ページのレスポンスヘッダに設定されたクッキーをリクエストヘッダへ変換し返却します。
	 * 
	 * @return リクエストヘッダ
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>947</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected Map&lt;String, String> getCookies() {</pre></td>
    </tr>
    <tr>
      <td class='line'>948</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l948s0'>		Map&lt;String, String> map = new HashMap&lt;String, String>();</pre></td>
    </tr>
    <tr>
      <td class='line'>949</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l949s0'>		List&lt;String> coolies = this.responseHeader.getHeader(HeaderField.SET_COOKIE);</pre></td>
    </tr>
    <tr>
      <td class='line'>950</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l950s0' title='Executions: 0' class='uncovered'>if (coolies == null</span> || <span id='l950s1' title='Executions: 0' class='uncovered'>coolies.size() == 0)</span> <span id='l950s2' title='Executions: 0' class='uncovered'>return map;</span></pre></td>
    </tr>
    <tr>
      <td class='line'>951</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l951s0'>		StringBuilder sb = new StringBuilder();</pre></td>
    </tr>
    <tr>
      <td class='line'>952</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l952s0'>		for (String cookie : coolies) sb.append(cookie).append(',');</pre></td>
    </tr>
    <tr>
      <td class='line'>953</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l953s0'>		map.put(HeaderField.COOKIE.getHeaderField(), sb.substring(0, sb.length()-1));</pre></td>
    </tr>
    <tr>
      <td class='line'>954</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l954s0'>		return map;</pre></td>
    </tr>
    <tr>
      <td class='line'>955</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * このページのURLにファイル名が指定されていない場合に限り、ファイル名を取得します。&lt;p/>
	 * ファイル名は固定値で"default"が設定されます。&lt;br/>
	 * &lt;br/>
	 * 変更する場合はオーバーライドし、変更してください。&lt;br/>
	 * &lt;br/>
	 * 拡張子はレスポンスヘッダの"Content-Type"のデフォルト拡張子より取得できます。&lt;br/>
	 * （responseHeader.getContentsType().getDefaultExtension()にて取得）&lt;br/>
	 * "Content-Type"が設定されていない場合、nullが返却されます。&lt;br/>
	 * 
	 * @param responseHeader レスポンスヘッダ
	 * @return ファイル名
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>970</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected String defaultFileName(ResponseHeader responseHeader) {</pre></td>
    </tr>
    <tr>
      <td class='line'>971</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l971s0'>		StringBuilder sb = new StringBuilder("index");</pre></td>
    </tr>
    <tr>
      <td class='line'>972</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l972s0'>		ContentsType contentType = responseHeader.getContentsType();</pre></td>
    </tr>
    <tr>
      <td class='line'>973</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l973s0' title='Executions: 0' class='uncovered'>if (contentType != null)</span> {</pre></td>
    </tr>
    <tr>
      <td class='line'>974</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l974s0'>			String extension = contentType.getDefaultExtension();</pre></td>
    </tr>
    <tr>
      <td class='line'>975</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l975s0'>			sb.append('.').append(extension);</pre></td>
    </tr>
    <tr>
      <td class='line'>976</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>977</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l977s0'>		return sb.toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>978</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * URLコネクションを元にバイトダンプのクラスオブジェクトを取得します。&lt;p/>
	 * 読み込みにて例外が発生した場合、BrowzingExceptionをthrowします。
	 * 
	 * @param connection URLコネクションオブジェクト
	 * @return バイトダンプのインスタンス
	 * @throws PageAccessException 読み込みにて例外が発生、またはドキュメント解析に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>988</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected ByteDump getByteDump(URLConnection connection) throws PageAccessException {</pre></td>
    </tr>
    <tr>
      <td class='line'>989</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l989s0'>		for (PageEventHandler handler : this.eventHandler) handler.beforeGetData(this);</pre></td>
    </tr>
    <tr>
      <td class='line'>990</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l990s0'>		InputStream pageDataStream = this.getUrlInputStream(connection);</pre></td>
    </tr>
    <tr>
      <td class='line'>991</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>992</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l992s0'>			ByteDump data = new ByteDump(pageDataStream);</pre></td>
    </tr>
    <tr>
      <td class='line'>993</td><td class='count'>8</td>
      <td><pre class='prettyprint covered' id='l993s0'>			return data;</pre></td>
    </tr>
    <tr>
      <td class='line'>994</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l994s0'>		} catch (DocumentException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>995</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l995s0'>			PageAccessException pageAccessError = new PageAccessException(ERROR_READ_PROCESS_FAILED, this.url.getURL(), e);</pre></td>
    </tr>
    <tr>
      <td class='line'>996</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l996s0'>			for (PageEventHandler handler : this.eventHandler) handler.errorGetData(pageAccessError);</pre></td>
    </tr>
    <tr>
      <td class='line'>997</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l997s0'>			throw pageAccessError;</pre></td>
    </tr>
    <tr>
      <td class='line'>998</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l998s0'>		} finally {</pre></td>
    </tr>
    <tr>
      <td class='line'>999</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l999s0'>			for (PageEventHandler handler : this.eventHandler) handler.afterGetData(this);</pre></td>
    </tr>
    <tr>
      <td class='line'>1000</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l1000s0'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>1002</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * リクエストヘッダのマップオブジェクトからリクエストヘッダオブジェクトのインスタンスを生成して返却します。
	 * 
	 * @param requestHeader リクエストヘッダのマップオブジェクト
	 * @return リクエストヘッダオブジェクト
	 * @throws PageHeaderImproperException リクエストヘッダのインスタンス生成に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>1011</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected RequestHeader createRequestHeader(Map&lt;String, String> requestHeader) throws PageHeaderImproperException {</pre></td>
    </tr>
    <tr>
      <td class='line'>1012</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l1012s0'>		return new RequestHeader(requestHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>1013</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * レスポンスヘッダのマップオブジェクトからレスポンスヘッダオブジェクトのインスタンスを生成して返却します。
	 * 
	 * @param responseHeader レスポンスヘッダのマップオブジェクト
	 * @return レスポンスヘッダオブジェクト
	 * @throws PageHeaderImproperException レスポンスヘッダのインスタンス生成に失敗した場合
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>1022</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected ResponseHeader createResponseHeader(Map&lt;String, List&lt;String>> responseHeader) throws PageHeaderImproperException {</pre></td>
    </tr>
    <tr>
      <td class='line'>1023</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l1023s0'>		return new ResponseHeader(responseHeader);</pre></td>
    </tr>
    <tr>
      <td class='line'>1024</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>1026</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>1027</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String toString() {</pre></td>
    </tr>
    <tr>
      <td class='line'>1028</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l1028s0'>		return this.url.toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>1029</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>1031</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>}</pre></td>
    </tr>
  </table>
</body>
</html>
